<!DOCTYPE html>
<html lang="en">
<head>
    <title>Let's Code Blog</title>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <link href="Content/blog.min.css" rel="stylesheet" />
</head>
<body>
    <div class="content">
        <h1>Welcome to the Blog
        </h1>
        <div class="posts">
        </div>
        <div class="footer">
            <a href="/help">API</a>
        </div>
    </div>

    <script id="blogPostTemplate" type="text/x-handlebars-template">
        <div class="blogPost">
            <h2>{{Title}}</h2>
            <div>{{PublishedDateTime}} {{Author}}</div>
            <div>{{Body}}</div>
        </div>
    </script>

    <script src="Scripts/jquery-2.0.2.min.js"></script>
    <script src="Scripts/handlebars.min.js"></script>
    <script src="Scripts/Reader.min.js"></script>
    <script>
        function displayAllBlogPosts(allBlogPosts) {
            var template = $("#blogPostTemplate").html();
            var compiledTemplate = Handlebars.compile(template);
            var targetPlacement = $("div.posts");
            var html = "";

            $.each(allBlogPosts, function (index, blogPost) {
                html += compiledTemplate(blogPost);
            });

            targetPlacement.html(html);
        }

        $(function () {
            blogReader.config.allBlogPostsCallback = displayAllBlogPosts;
            blogReader.loadAllBlogPosts();
        });
    </script>
</body>
</html>
